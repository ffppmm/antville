autoLogin();
checkIfLoggedIn(this.href(req.action));

var deny = this.isSubscribeDenied(user);
if (deny) {
   res.message = deny;
   res.redirect(user.cache.referer ? this.members.href("login") : this.href());
}

// create a new member-object and add it to membership-mountpoint
this.members.addMember(user);
res.message = this.title + " was added to your subscriptions!";
res.redirect(this.href());