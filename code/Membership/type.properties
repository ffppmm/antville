##
## The Antville Project
## http://code.google.com/p/antville
##
## Copyright 2001-2007 by The Antville People
##
## Licensed under the Apache License, Version 2.0 (the ``License'');
## you may not use this file except in compliance with the License.
## You may obtain a copy of the License at
##
##    http://www.apache.org/licenses/LICENSE-2.0
##
## Unless required by applicable law or agreed to in writing, software
## distributed under the License is distributed on an ``AS IS'' BASIS,
## WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
## See the License for the specific language governing permissions and
## limitations under the License.
##
## $Revision$
## $LastChangedBy$
## $LastChangedDate$
## $URL$
##

_db      = antville
_table   = AV_MEMBERSHIP
_id      = MEMBERSHIP_ID
_parent  = site.members

username    = MEMBERSHIP_USERNAME
level       = MEMBERSHIP_LEVEL
createtime  = MEMBERSHIP_CREATETIME
modifytime  = MEMBERSHIP_MODIFYTIME

site           = object(Site)
site.local     = MEMBERSHIP_F_SITE
site.foreign   = SITE_ID

user           = object(User)
user.local     = MEMBERSHIP_F_USER
user.foreign   = USER_ID

modifier          = object(User)
modifier.local    = MEMBERSHIP_F_USER_MODIFIER
modifier.foreign  = USER_ID

stories           = collection(Story)
stories.local     = MEMBERSHIP_F_SITE
stories.foreign   = TEXT_F_SITE
stories.local.1   = MEMBERSHIP_F_USER
stories.foreign.1 = TEXT_F_USER_CREATOR
stories.filter    = TEXT_PROTOTYPE = 'Story'
stories.order     = TEXT_CREATETIME desc

polls             = collection(Poll)
polls.local       = MEMBERSHIP_F_SITE
polls.foreign     = POLL_F_SITE
polls.local.1     = MEMBERSHIP_F_USER
polls.foreign.1   = POLL_F_USER_CREATOR
polls.order       = POLL_CREATETIME desc

images            = collection(Image)
images.local      = MEMBERSHIP_F_SITE
images.foreign    = IMAGE_F_SITE
images.local.1    = MEMBERSHIP_F_USER
images.foreign.1  = IMAGE_F_USER_CREATOR
images.filter     = IMAGE_PROTOTYPE = 'Image' and IMAGE_F_IMAGE_PARENT is null
images.order      = IMAGE_CREATETIME desc

files             = collection(File)
files.local       = MEMBERSHIP_F_SITE
files.foreign     = FILE_F_SITE
files.local.1     = MEMBERSHIP_F_USER
files.foreign.1   = FILE_F_USER_CREATOR
files.order       = FILE_CREATETIME desc
