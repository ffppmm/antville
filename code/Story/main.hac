var deny = this.isViewDenied(session.user,req.data.memberlevel);
if (deny) {
   res.message = getMessage("error",deny);
   res.redirect(this.site.href());
}

res.data.title = this.site.title;
var storytitle = this.getRenderedContentPart("title");
if (storytitle)
   res.data.title += " - " + stripTags(storytitle);

res.data.body = this.renderSkinAsString("main");

path.site.renderSkin("page");

// increment read-counter
this.incrementReadCounter();
logAccess();